# dosaaf-exam-bot# README удалён



Небольшой Telegram-бот для приёма заявок на экзамен и управления списком участников.Файл README удалён по запросу — документация встроена в код и комментарии.

Функционал:

Функционал

- регистрация участников (ФИО, телефон, номер попытки)
- хранение заявок в локальном JSON-файле (`data.json` по умолчанию)
- админская панель (reply-клавиатура и inline-меню)
- админские команды: просмотр списка, назначение даты экзамена, рассылка приглашений, удаление участников, очистка списка
- при рассылке приглашений бот помечает участников как приглашённых и после опционального подтверждения админ может удалить приглашённых
- скачивание списка в виде TXT-файла (кнопка "Скачать список") — каждая запись на новой строке, файл содержит заголовок `СПИСОК ЗАРЕГИСТРИРОВАННЫХ УЧАСТНИКОВ`
- аудиторский лог действий (appendAudit сохраняет записи в `data.json`)

Установка и запуск
1. Скопируйте `.env` (создайте файл `.env`) и заполните:

```
BOT_TOKEN=ваш_токен
ADMIN_ID=ваш_numeric_admin_id
DATA_FILE=data.json
```

2. Установите зависимости и запустите бота:

```powershell
npm install
node bot.js
```

Команды пользователя
- /start — приветствие и кнопка "Записаться на экзамен"
- "Записаться на экзамен" — начало формы регистрации (ФИО → телефон → попытка)

Команды администратора
- /start (при авторизации по ADMIN_ID) — показать админскую панель
- Меню админа — откроет inline-меню с действиями
- Список заявок — показать текущие заявки (идентификаторы видны только админу)
- Назначить экзамен — установить дату/время экзамена (поддерживаются форматы DD.MM.YYYY HH:MM, DD:MM:YYYY HH:MM, YYYY-MM-DD[ HH:MM])
- Разослать всем — разослать приглашения всем участникам
- Разослать по ID — разослать приглашения по списку id
- Удалить участников — удалить участников по списку id
- Очистить список — удалить все заявки (с подтверждением)
- Скачать список — сгенерировать и скачать TXT-файл со списком участников

Формат TXT
Файл содержит заголовок `СПИСОК ЗАРЕГИСТРИРОВАННЫХ УЧАСТНИКОВ` и далее по одной строке на участника:

```
СПИСОК ЗАРЕГИСТРИРОВАННЫХ УЧАСТНИКОВ

Иванов Иван Иванович | +7... | попытка 1
Петров Петр Петрович | +7... | попытка 2
```

Хранение данных
- Все данные хранятся в файле `data.json` в корне проекта (можно задать через переменную окружения `DATA_FILE`).

Примечания
- Бот использует polling; убедитесь, что запущен только один инстанс с одним BOT_TOKEN (в противном случае Telegram вернёт ошибку 409).
- Лог аудита хранится внутри `data.json` в поле `auditLog`.
- Код предварительно очищен от комментариев для финальной полировки перед деплоем.

Если нужно — могу подготовить инструкцию для деплоя (системный сервис, Docker, webhook и т.д.).
